(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},30909,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(43476),a=e.i(71645),s=e.i(18566);function l(){let e=(0,s.useParams)(),l=(0,s.useRouter)(),[n,i]=(0,a.useState)(null),[c,o]=(0,a.useState)([]),[d,r]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=null==e?void 0:e.code;t&&(async()=>{let e=await fetch("/api/events?code=".concat(encodeURIComponent(t))).then(e=>e.json());i(e.id);let[a,s,l]=await Promise.all([fetch("/api/events/".concat(e.id,"/participants")).then(e=>e.json()),fetch("/api/events/".concat(e.id,"/poll")).then(e=>e.ok?e.json():null).catch(()=>null),fetch("/api/me").then(e=>e.ok?e.json():null).catch(()=>null)]);if(o(a),r(s),null==l?void 0:l.id){let e=a.find(e=>{var t;return(null==(t=e.user)?void 0:t.id)===l.id});m((null==e?void 0:e.id)||null)}})()},[null==e?void 0:e.code]);let x=async t=>{if((null==d?void 0:d.id)&&u){p(!0);try{await fetch("/api/polls/".concat(d.id,"/vote"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({voterParticipantId:u,targetParticipantId:t})}),l.push("/ev/".concat(e.code,"/teams"))}finally{p(!1)}}};if(!d||!n)return(0,t.jsx)("main",{className:"p-6 max-w-xl mx-auto",children:"Loadingâ€¦"});let f=new Date,v=new Date(d.startsAt),j=new Date(d.endsAt);return d.finalized||f<v||f>j?(0,t.jsxs)("main",{className:"p-6 max-w-xl mx-auto space-y-2",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"MVP Voting"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Voting is not active."}),(0,t.jsx)("button",{className:"border px-3 py-1 rounded",onClick:()=>l.push("/ev/".concat(e.code,"/teams")),children:"Back"})]}):(0,t.jsxs)("main",{className:"p-6 max-w-xl mx-auto space-y-4",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"MVP Voting"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Select the MVP for this match."}),(0,t.jsx)("ul",{className:"divide-y border rounded",children:c.map(e=>{var a,s;return(0,t.jsxs)("li",{className:"p-2 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:e.isGuest?e.guestName||"Guest Player":(null==(a=e.user)?void 0:a.displayName)||(null==(s=e.user)?void 0:s.handle)}),(0,t.jsx)("button",{disabled:!u||h,onClick:()=>x(e.id),className:"border rounded px-2 py-1 text-sm disabled:opacity-50",children:"Vote"})]},e.id)})})]})}}]);