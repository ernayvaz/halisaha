(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(43476),a=e.i(71645);function n(e,t,a){return Math.min(Math.max(e,t),a)}function r(){let[e,r]=(0,a.useState)("Pickup Match"),[s,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[d,o]=(0,a.useState)(60),[m,u]=(0,a.useState)(null),[x,h]=(0,a.useState)({}),[p,b]=(0,a.useState)(!1),g=(0,a.useMemo)(()=>{let t={};(!e||e.trim().length<2)&&(t.name="Event name is required"),s&&function(e){let t=/^(\d{2})-(\d{2})-(\d{4})$/.exec(e);if(!t)return!1;let a=Number(t[1]),n=Number(t[2]);return t[3],!(n<1)&&!(n>12)&&!(a<1)&&!(a>31)}(s)||(t.date="Date must be DD-MM-YYYY"),l&&/^([01]\d|2[0-3]):([0-5]\d)$/.test(l)||(t.startTime="Start time must be HH:MM (24h)");let[a,n,r]=(s||"").split("-").map(e=>parseInt(e,10)),[i,c]=(l||"").split(":").map(e=>parseInt(e,10));return Number.isFinite(a)&&Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(c)&&new Date(r,n-1,a,i,c,0,0).getTime()<Date.now()&&(t.date="Date/time cannot be in the past"),(!Number.isFinite(Number(d))||d<=0||d>300)&&(t.durationMinutes="Duration must be 1-300 minutes"),t},[e,s,l,d]),N=async()=>{if(b(!0),h(g),Object.keys(g).length>0)return void b(!1);let t=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,date:s,startTime:l,durationMinutes:d})}),a=await t.json();t.ok&&a.code?(u(a.code),h({})):h("validation_error"===a.error&&a.details?a.details:{form:a.error||"Error"}),b(!1)},j=m?"".concat(window.location.origin,"/ev/").concat(m):"";return(0,t.jsxs)("main",{className:"p-6 max-w-2xl mx-auto space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Create Football Event âš½"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Event Name"}),(0,t.jsx)("input",{className:"border rounded p-2 w-full",value:e,onChange:e=>r(e.target.value)}),x.name&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:x.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Date"}),(0,t.jsx)("input",{type:"date",className:"border rounded p-2 w-full",value:(()=>{let e=/^(\d{2})-(\d{2})-(\d{4})$/.exec(s);return e?"".concat(e[3],"-").concat(e[2],"-").concat(e[1]):""})(),onChange:e=>{let t=e.target.value,a=/^(\d{4})-(\d{2})-(\d{2})$/.exec(t);i(a?"".concat(a[3],"-").concat(a[2],"-").concat(a[1]):"")},min:(()=>{let e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(n)})(),"aria-label":"Date"}),x.date&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:x.date})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Start Time"}),(0,t.jsx)("input",{type:"text",placeholder:"HH:MM",className:"border rounded p-2 w-full",value:l,onChange:e=>c(function(e){let t=e.replace(/\D+/g,"").slice(0,4),a=t.slice(0,2),n=t.slice(2,4),r=a;return n&&(r+=":"+n),r}(e.target.value)),onBlur:e=>c(function(e){let t=/^(\d{1,2}):(\d{1,2})$/.exec(e);if(!t)return e;let a=n(Number(t[1]),0,23),r=n(Number(t[2]),0,59);return"".concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0"))}(e.target.value)),inputMode:"numeric","aria-label":"Start time HH:MM (24-hour)"}),x.startTime&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:x.startTime})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Duration (min)"}),(0,t.jsx)("input",{type:"number",className:"border rounded p-2 w-full",value:d,onChange:e=>o(parseInt(e.target.value||"60",10))}),x.durationMinutes&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:x.durationMinutes})]})]}),x.form&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:x.form}),(0,t.jsx)("button",{onClick:N,disabled:p||Object.keys(g).length>0,className:"bg-green-600 disabled:opacity-50 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Create"}),m&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm",children:["Event Code: ",(0,t.jsx)("b",{children:m})]}),(0,t.jsxs)("p",{className:"text-sm break-all",children:["Link: ",(0,t.jsx)("a",{href:j,className:"text-blue-600 underline",children:j})]}),(0,t.jsx)("div",{className:"border inline-block p-2 rounded",children:(0,t.jsx)("img",{src:"/api/qrcode?text=".concat(encodeURIComponent(j)),alt:"QR",width:256,height:256})})]})]})}}]);