{"version":3,"sources":["turbopack:///[project]/node_modules/next/navigation.js","turbopack:///[project]/src/components/MatchInfo.tsx"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\ntype Event = {\n  id: string;\n  code: string;\n  name?: string | null;\n  date?: string | null;\n  startTime?: string | null;\n  durationMinutes?: number | null;\n};\n\nfunction formatCountdown(ms: number): string {\n  if (ms <= 0) return \"00:00:00\";\n  const hours = Math.floor(ms / (1000 * 60 * 60));\n  const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));\n  const seconds = Math.floor((ms % (1000 * 60)) / 1000);\n  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n}\n\nexport default function MatchInfo({ eventCode, title }: { eventCode?: string; title?: string }) {\n  const [eventData, setEventData] = useState<Event | null>(null);\n  const [countdown, setCountdown] = useState<string>(\"--:--:--\");\n\n  useEffect(() => {\n    if (!eventCode) return;\n    let cancelled = false;\n    const loadEvent = async () => {\n      try {\n        const r = await fetch(`/api/events?code=${encodeURIComponent(eventCode)}`);\n        if (r.ok) {\n          const e = await r.json();\n          if (!cancelled) setEventData(e);\n        }\n      } catch {}\n    };\n    loadEvent();\n    const id = setInterval(loadEvent, 30_000); // refresh every 30s\n    return () => { cancelled = true; clearInterval(id); };\n  }, [eventCode]);\n\n  useEffect(() => {\n    if (!eventData?.date || !eventData?.startTime) return;\n    \n    const updateCountdown = () => {\n      try {\n        const [year, month, day] = eventData.date!.split('T')[0].split('-').map(Number); // stored ISO yyyy-mm-dd\n        const [hour, minute] = eventData.startTime!.split(':').map(Number);\n        const matchDate = new Date(year, month - 1, day, hour, minute);\n        const now = new Date();\n        const diff = matchDate.getTime() - now.getTime();\n        setCountdown(formatCountdown(diff));\n      } catch {\n        setCountdown(\"--:--:--\");\n      }\n    };\n\n    updateCountdown();\n    const interval = setInterval(updateCountdown, 1000);\n    return () => clearInterval(interval);\n  }, [eventData]);\n\n  if (!eventData) return null;\n\n  const formatDate = (dateStr: string) => {\n    try {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString('tr-TR', { \n        day: '2-digit', \n        month: '2-digit', \n        year: 'numeric' \n      });\n    } catch {\n      return dateStr;\n    }\n  };\n\n  const subtitle = [\n    eventData.date ? formatDate(eventData.date) : null,\n    eventData.startTime,\n    eventData.durationMinutes ? `${eventData.durationMinutes} min` : null\n  ].filter(Boolean).join(' â€¢ ');\n\n  return (\n    <div className=\"flex items-center justify-between mb-4\">\n      <div>\n        {title && <h1 className=\"text-xl font-semibold\">{title}</h1>}\n        {subtitle && <p className=\"text-sm text-gray-500 mt-1\">{subtitle}</p>}\n      </div>\n      <div className=\"bg-green-700/70 px-3 py-1 rounded-lg text-sm font-mono text-white border-2 border-white\">\n        {countdown}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}