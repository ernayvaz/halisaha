module.exports=[50944,(a,b,c)=>{b.exports=a.r(74137)},32455,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useParams)(),e=(0,d.useSearchParams)(),f=(0,d.useRouter)(),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),q=e.get("mode")||"join",[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),z=async a=>{if(h(a),!a||a.length<3)return void l(null);let b=await fetch("/api/nickname/check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({handle:a.toLowerCase()})});l((await b.json()).available??!1)},A=async()=>{let a=await fetch("/api/users/anonymous",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({handle:g.toLowerCase(),displayName:i||g})}),b=await a.json();if(a.ok){n(b.id);try{"join"===q&&v&&(await fetch(`/api/events/${v}/participants`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:b.id,mode:"join"})})).ok&&y(!0)}catch{}}else alert(b.error||"Error")};(0,c.useEffect)(()=>{(async()=>{if(!m)return;let a=await fetch(`/api/users/${m}/card`);a.ok&&p(await a.json())})()},[m]),(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/me");a.ok&&u(await a.json())}catch{}})()},[]),(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch(`/api/events?code=${encodeURIComponent(a.code)}`);if(b.ok){let a=await b.json();w(a.id)}}catch{}})()},[a.code]);let B=()=>o||{id:m||"me",foot:"R",pace:3,shoot:3,pass:3,defend:3},C=async()=>{if(!m)return;let b=B();if(!(b&&b.foot&&[b.pace,b.shoot,b.pass,b.defend].every(a=>"number"==typeof a&&a>=1&&a<=5)))return void alert("Please complete your player profile card");let c={foot:b.foot,pace:b.pace,shoot:b.shoot,pass:b.pass,defend:b.defend},d=await fetch(`/api/users/${m}/card`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)return void alert((await d.json()).error||"Error");s(!0);let e=await fetch(`/api/events?code=${encodeURIComponent(a.code)}`),g=await e.json();"join"!==q&&await fetch(`/api/events/${g.id}/participants`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"view"})}),f.push(`/ev/${a.code}/teams`)};return(0,b.jsxs)("main",{className:"p-6 max-w-xl mx-auto space-y-6",children:[(0,b.jsxs)("section",{className:"space-y-3",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Nickname"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Handle"}),(0,b.jsx)("input",{className:"border rounded p-2 w-full",value:g,onChange:a=>z(a.target.value)}),null!==k&&(0,b.jsx)("p",{className:`text-sm ${k?"text-green-600":"text-red-600"}`,children:k?"Available":"Taken/Invalid"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Display name"}),(0,b.jsx)("input",{className:"border rounded p-2 w-full",value:i,onChange:a=>j(a.target.value)})]}),(0,b.jsx)("button",{disabled:!k,onClick:A,className:"bg-blue-600 disabled:opacity-50 text-white px-4 py-2 rounded",children:"Save handle"})]}),m&&(0,b.jsxs)("section",{className:"space-y-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Player Profile Card (required)"}),(0,b.jsxs)("div",{className:"rounded-xl border bg-white text-black shadow p-4",children:[(0,b.jsx)("div",{className:"text-center font-semibold mb-2",children:i||g||"Your Name"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Pace"}),(0,b.jsxs)("select",{className:"border rounded p-2 w-full",value:B().pace??3,onChange:a=>p({...B(),pace:parseInt(a.target.value||"3",10)}),children:[(0,b.jsx)("option",{value:1,children:"1 - Slow"}),(0,b.jsx)("option",{value:2,children:"2 - Below Average"}),(0,b.jsx)("option",{value:3,children:"3 - Average"}),(0,b.jsx)("option",{value:4,children:"4 - Fast"}),(0,b.jsx)("option",{value:5,children:"5 - Very Fast"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Shoot"}),(0,b.jsxs)("select",{className:"border rounded p-2 w-full",value:B().shoot??3,onChange:a=>p({...B(),shoot:parseInt(a.target.value||"3",10)}),children:[(0,b.jsx)("option",{value:1,children:"1 - Poor"}),(0,b.jsx)("option",{value:2,children:"2 - Below Average"}),(0,b.jsx)("option",{value:3,children:"3 - Average"}),(0,b.jsx)("option",{value:4,children:"4 - Good"}),(0,b.jsx)("option",{value:5,children:"5 - Excellent"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Pass"}),(0,b.jsxs)("select",{className:"border rounded p-2 w-full",value:B().pass??3,onChange:a=>p({...B(),pass:parseInt(a.target.value||"3",10)}),children:[(0,b.jsx)("option",{value:1,children:"1 - Poor"}),(0,b.jsx)("option",{value:2,children:"2 - Below Average"}),(0,b.jsx)("option",{value:3,children:"3 - Average"}),(0,b.jsx)("option",{value:4,children:"4 - Good"}),(0,b.jsx)("option",{value:5,children:"5 - Excellent"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Defend"}),(0,b.jsxs)("select",{className:"border rounded p-2 w-full",value:B().defend??3,onChange:a=>p({...B(),defend:parseInt(a.target.value||"3",10)}),children:[(0,b.jsx)("option",{value:1,children:"1 - Poor"}),(0,b.jsx)("option",{value:2,children:"2 - Below Average"}),(0,b.jsx)("option",{value:3,children:"3 - Average"}),(0,b.jsx)("option",{value:4,children:"4 - Good"}),(0,b.jsx)("option",{value:5,children:"5 - Excellent"})]})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm",children:"Preferred Foot"}),(0,b.jsxs)("select",{className:"border rounded p-2 w-full",value:B().foot??"",onChange:a=>p({...B(),foot:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Select your preferred foot"}),(0,b.jsx)("option",{value:"R",children:"Right Foot"}),(0,b.jsx)("option",{value:"L",children:"Left Foot"})]})]})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("button",{onClick:C,className:"bg-green-600 text-white px-3 py-2 rounded",children:"Save and continue"})})]})]})}}];

//# sourceMappingURL=_da67d602._.js.map