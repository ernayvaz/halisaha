module.exports=[50944,(a,b,c)=>{b.exports=a.r(74137)},863,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useParams)(),e=(0,d.useRouter)(),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let b=a?.code;b&&(async()=>{let a=await fetch(`/api/events?code=${encodeURIComponent(b)}`).then(a=>a.json());g(a.id);let[c,d,e]=await Promise.all([fetch(`/api/events/${a.id}/participants`).then(a=>a.json()),fetch(`/api/events/${a.id}/poll`).then(a=>a.ok?a.json():null).catch(()=>null),fetch("/api/me").then(a=>a.ok?a.json():null).catch(()=>null)]);if(i(c),k(d),e?.id){let a=c.find(a=>a.user?.id===e.id);m(a?.id||null)}})()},[a?.code]);let p=async b=>{if(j?.id&&l){o(!0);try{await fetch(`/api/polls/${j.id}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({voterParticipantId:l,targetParticipantId:b})}),e.push(`/ev/${a.code}/teams`)}finally{o(!1)}}};if(!j||!f)return(0,b.jsx)("main",{className:"p-6 max-w-xl mx-auto",children:"Loadingâ€¦"});let q=new Date,r=new Date(j.startsAt),s=new Date(j.endsAt);return j.finalized||q<r||q>s?(0,b.jsxs)("main",{className:"p-6 max-w-xl mx-auto space-y-2",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"MVP Voting"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Voting is not active."}),(0,b.jsx)("button",{className:"border px-3 py-1 rounded",onClick:()=>e.push(`/ev/${a.code}/teams`),children:"Back"})]}):(0,b.jsxs)("main",{className:"p-6 max-w-xl mx-auto space-y-4",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"MVP Voting"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Select the MVP for this match."}),(0,b.jsx)("ul",{className:"divide-y border rounded",children:h.map(a=>(0,b.jsxs)("li",{className:"p-2 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm",children:a.isGuest?a.guestName||"Guest Player":a.user?.displayName||a.user?.handle}),(0,b.jsx)("button",{disabled:!l||n,onClick:()=>p(a.id),className:"border rounded px-2 py-1 text-sm disabled:opacity-50",children:"Vote"})]},a.id))})]})}}];

//# sourceMappingURL=_99cbb210._.js.map