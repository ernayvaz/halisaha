module.exports=[47444,a=>{"use strict";a.s(["default",()=>g]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(10705),f=a.i(86443);function g(){let a=(0,d.useParams)(),g=(0,d.useRouter)(),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(0),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)({}),O=(0,c.useRef)(()=>{}),P=(0,c.useRef)({}),Q=async a=>{if(J(a),L(null),!a.isGuest&&a.user?.id)try{let b=await fetch(`/api/users/${a.user.id}/card`);if(b.ok){let a=await b.json();L(a)}}catch(a){console.error("Failed to load player card:",a)}};async function R(a){try{let b=await fetch(`/api/events?code=${encodeURIComponent(a)}`).then(a=>a.json()),c=await fetch(`/api/events/${b.id}/poll`);if(!c.ok)return;let d=await c.json(),e=new Date,f=new Date(d.startsAt),h=new Date(d.endsAt);if(d.finalized||e<f||e>h)return;let i=await fetch("/api/me").then(a=>a.ok?a.json():null).catch(()=>null);if(!i?.id)return;let j=(await fetch(`/api/events/${b.id}/participants`).then(a=>a.json())).find(a=>a.user?.id===i.id);if(!j)return;Array.isArray(d.votes)&&d.votes.some(a=>a.voterParticipantId===j.id)||g.push(`/ev/${a}/mvp`)}catch{}}(0,c.useEffect)(()=>{let b=a?.code;if(b)return R(b),(async()=>{let a=await fetch(`/api/events?code=${encodeURIComponent(b)}`).then(a=>a.json());j(a);let[c,d,e]=await Promise.all([fetch(`/api/events/${a.id}/participants`).then(a=>a.json()),fetch(`/api/events/${a.id}/teams`).then(a=>a.json()),fetch("/api/me").then(a=>a.ok?a.json():null).catch(()=>null)]);l(c);let f=d;if(0===f.length){let[b,c]=await Promise.all([fetch(`/api/events/${a.id}/teams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:1,name:"Team 1",color:"#dc2626"})}).then(a=>a.json()),fetch(`/api/events/${a.id}/teams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:2,name:"Team 2",color:"#f59e0b"})}).then(a=>a.json())]);f=[b,c]}if(n(f),e?.id){let a=c.find(a=>a.user?.id===e.id);x(a?.role==="owner")}else x(!1);await T(a.id,f,{}),await U(a.id,f)})(),O.current?.(),(async()=>{let a=await fetch(`/api/events?code=${encodeURIComponent(b)}`).then(a=>a.json());O.current=(0,e.subscribe)(a.id,c=>{A&&Date.now()-A<1500||!(C&&Date.now()-C<2e3)&&("participants_updated"===c.type?fetch(`/api/events/${a.id}/participants`).then(a=>a.json()).then(l).catch(()=>{}):"teams_updated"===c.type?(async()=>{let b=await fetch(`/api/events/${a.id}/teams`).then(a=>a.json());n(b),S(b)})().catch(()=>{}):"positions_updated"===c.type?(Z?.id&&fetch(`/api/teams/${Z.id}/positions`).then(a=>a.json()).then(t).catch(()=>{}),$?.id&&fetch(`/api/teams/${$.id}/positions`).then(a=>a.json()).then(v).catch(()=>{})):"flags_updated"===c.type&&fetch(`/api/events?code=${encodeURIComponent(b)}`).then(a=>a.json()).then(j).catch(()=>{}))})})(),()=>{try{O.current?.()}catch{}let a=P.current;P.current={},Object.values(a).forEach(a=>{try{a()}catch{}})}},[a?.code]);let S=a=>{let b=P.current,c=new Set(a.map(a=>a.id));for(let[a,d]of Object.entries(b))if(!c.has(a)){try{d()}catch{}delete b[a]}for(let c of a)b[c.id]||(b[c.id]=(0,e.subscribe)(c.id,a=>{"positions_updated"===a.type&&a.teamId===c.id&&fetch(`/api/teams/${c.id}/positions`).then(a=>a.json()).then(a=>{1===c.index?t(a):v(a)}).catch(()=>{})}));P.current=b},T=async(a,b,c)=>{for(let d of b)if(!d.formation){let b=aa(c[d.id]||0).map(a=>a.v),e=b.length?b[Math.floor(Math.random()*b.length)]:"1-2-2-1";await fetch(`/api/events/${a}/teams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:d.index,name:d.name,formation:e})})}},U=async(a,b)=>{let c=b.find(a=>1===a.index),d=b.find(a=>2===a.index);if(c){let[a]=await Promise.all([fetch(`/api/teams/${c.id}/positions`).then(a=>a.json())]);t(a)}if(d){let[a]=await Promise.all([fetch(`/api/teams/${d.id}/positions`).then(a=>a.json())]);v(a)}},V=a=>m.find(b=>b.index===a),W=async(a,b)=>{if(!i||!w||y)return;z(!0);let c=V(a),d={...c,name:b.name??c?.name??`Team ${a}`,color:b.color??c?.color??({1:"#dc2626",2:"#f59e0b"})[a],formation:b.formation??c?.formation??"1-2-2-1"};n([...m.filter(b=>b.index!==a),d].sort((a,b)=>a.index-b.index));try{let c={index:a,name:b.name??V(a)?.name??`Team ${a}`,color:b.color??V(a)?.color,formation:b.formation??V(a)?.formation},d=await fetch(`/api/events/${i.id}/teams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),e=await d.json(),f=m.filter(b=>b.index!==a);n([...f,e].sort((a,b)=>a.index-b.index))}catch(b){console.error("Team update failed:",b),n([...m.filter(b=>b.index!==a),c].sort((a,b)=>a.index-b.index))}z(!1)},X=async()=>{if(!i||!w)return;let a=await fetch(`/api/events/${i.id}/flags`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rosterLocked:!i.rosterLocked})});if(a.ok){let b=await a.json();j({...i,rosterLocked:b.rosterLocked})}},Y=async()=>{if(i&&w&&confirm("Reset teams and positions? Players will be kept.")){if(z(!0),(await fetch(`/api/events/${i.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"soft_reset"})})).ok){let[a,b]=await Promise.all([fetch(`/api/events/${i.id}/participants`).then(a=>a.json()),fetch(`/api/events/${i.id}/teams`).then(a=>a.json())]);l(a),n(b),await U(i.id,b)}z(!1)}},Z=(0,c.useMemo)(()=>V(1),[m]),$=(0,c.useMemo)(()=>V(2),[m]);(0,c.useEffect)(()=>{if(!w||!i)return;let a=async a=>{let b=_(a.formation.split("-").map(a=>parseInt(a,10)).reduce((a,b)=>a+b,0));a.formation!==b&&await W(a.index,{formation:b})};Z&&a(Z),$&&a($)},[Z?.id,$?.id,w,i?.id]);let _=a=>{if(a<=1)return"1-0-0-0";if(2===a)return"1-1-0-0";if(3===a)return"1-1-1-0";if(4===a)return"1-1-1-1";if(5===a)return"1-2-1-1";if(6===a)return"1-2-2-1";if(7===a)return"1-2-2-2";if(8===a)return"1-3-2-2";if(9===a)return"1-3-3-2";if(10===a)return"1-3-3-3";let b=a-10,c=[3,3,3];for(let a=0;a<b;a++)c[a%3]++;return`1-${c[0]}-${c[1]}-${c[2]}`},aa=a=>{let b=_(a),c=[{v:b,label:`${b} (Auto)`}],d=new Set([b]);if(a>=3)for(let a of["1-2-2-1","1-1-2-1","1-2-1-1"])d.has(a)||(d.add(a),c.push({v:a,label:a}));return c},ab=({p:a})=>{let c=a.user?.badges&&a.user.badges[0];return c?(0,b.jsx)("span",{title:`MVP Lv${c.level}`,className:"ml-1 text-[10px]",children:"🏅"}):null},ac=({team:a,pos:d,setPos:e})=>{let f=(0,c.useRef)(null),g=(0,c.useRef)(null);if(!a)return null;let h=(a,b,c)=>Math.min(Math.max(a,b),c),j=async()=>{if(!g.current||!a)return;let b=g.current.id;g.current=null;let c=d.find(a=>a.participantId===b);c&&(!i?.lineupLocked||w)&&w&&(await fetch(`/api/teams/${a.id}/positions`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({participantId:b,x:c.x,y:c.y})}),e(await fetch(`/api/teams/${a.id}/positions`).then(a=>a.json())))},k=2===a.index;return(0,b.jsxs)("div",{ref:f,onPointerMove:b=>{if(!f.current||!g.current)return;let c=f.current.getBoundingClientRect(),d=h((b.clientX-c.left)/c.width,0,1),i=h((b.clientY-c.top)/c.height,0,1),j=g.current.id;e(b=>{let c=b.findIndex(a=>a.participantId===j);if(c>=0){let a=[...b];return a[c]={...a[c],x:d,y:i},a}return[...b,{id:`tmp-${j}`,teamId:a.id,participantId:j,x:d,y:i}]})},onPointerUp:j,className:"relative w-full h-48 bg-green-700 rounded overflow-hidden border-2 border-gray-300",children:[(0,b.jsx)("div",{className:"absolute inset-2 border-2 border-white rounded-sm"}),k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"absolute bottom-2 left-[15%] w-[70%] h-[28%] border-2 border-white"}),(0,b.jsx)("div",{className:"absolute bottom-2 left-[35%] w-[30%] h-[12%] border-2 border-white"}),(0,b.jsx)("div",{className:"absolute w-1.5 h-1.5 bg-white rounded-full",style:{left:"50%",bottom:"18%",transform:"translateX(-50%)"}}),(0,b.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 -top-8 w-20 h-20 border-2 border-white rounded-full"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"absolute top-2 left-[15%] w-[70%] h-[28%] border-2 border-white"}),(0,b.jsx)("div",{className:"absolute top-2 left-[35%] w-[30%] h-[12%] border-2 border-white"}),(0,b.jsx)("div",{className:"absolute w-1.5 h-1.5 bg-white rounded-full",style:{left:"50%",top:"18%",transform:"translateX(-50%)"}}),(0,b.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-8 w-20 h-20 border-2 border-white rounded-full"})]}),o.map((c,e)=>{let h=((b,c)=>{let e=d.find(a=>a.participantId===c);if(e)return{x:e.x,y:e.y};let f=function(a){let b=a.split("-").map(a=>parseInt(a,10)),c=b[1]||0,d=b[2]||0,e=b[3]||0,f=[.28,.56,.86],g=[];return g.push({x:.5,y:.14}),[c,d,e].forEach((a,b)=>{(a=>{if(a<=0)return[];if(1===a)return[.5];let b=[];for(let c=0;c<a;c++)b.push(.2+.6/(a-1)*c);return b})(a).forEach(a=>g.push({x:a,y:f[b]}))}),g}(a.formation);if(b<f.length){let c=f[b];return 2===a.index?{x:c.x,y:1-c.y}:c}let g=b-f.length;return{x:Math.min(.95,.65+.1*Math.floor(g/4)),y:.2+g%4*.2}})(e,c.participantId),j=(a=>{let b=o.find(b=>b.participantId===a);return b?b.participant.isGuest?b.participant.guestName||"Guest":b.participant.user?.displayName||b.participant.user?.handle||"Player":"Player"})(c.participantId),k=c.participant;return(0,b.jsx)("div",{className:"absolute",style:{left:`${100*h.x}%`,top:`${100*h.y}%`,transform:"translate(-50%,-50%)"},onPointerDown:a=>((a,b)=>{if(f.current&&(!i?.lineupLocked||w)){g.current={id:b};try{a.target.setPointerCapture(a.pointerId)}catch{}}})(a,c.participantId),onClick:a=>{a.stopPropagation(),Q(k)},children:(0,b.jsxs)("div",{className:"relative cursor-pointer flex flex-col items-center",children:[(0,b.jsxs)("div",{className:"relative",children:[((a,c)=>{let d=c||"#86efac",e=function(a){let b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);if(!b)return"#000";let c=parseInt(b[1],16),d=parseInt(b[2],16);return(.2126*c+.7152*d+.0722*parseInt(b[3],16))/255<.5?"#fff":"#000"}(d);return(0,b.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-white shadow flex items-center justify-center text-[10px] font-semibold",style:{backgroundColor:d,color:e},title:a,children:(a||"?").slice(0,1).toUpperCase()})})(j,a.color),!k.isGuest&&(0,b.jsx)("span",{className:"absolute -top-2 -right-2 text-[10px]",children:k.user?.badges?.length?"🏅":""})]}),(0,b.jsx)("div",{className:"text-[8px] text-white font-medium mt-1 max-w-[50px] truncate bg-black/70 rounded px-1 text-center",children:j})]})},c.id)})]})};return i?(0,b.jsxs)("main",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[(0,b.jsx)(f.default,{eventCode:a.code,title:"Teams"}),(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:X,disabled:!w,className:"border px-3 py-1 rounded disabled:opacity-50",children:["Roster Lock: ",i.rosterLocked?"On":"Off"]}),(0,b.jsx)("button",{onClick:Y,disabled:!w,className:"border px-3 py-1 rounded text-red-600 disabled:opacity-50",children:"Reset Event"})]})}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Assign players via → buttons or use Auto-balance. Only the creator can change teams and positions."}),!w&&(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"You can rearrange locally for preview. Changes are not saved."}),(0,b.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"border rounded p-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,b.jsx)("h3",{className:"font-medium",children:"Players"})}),(0,b.jsx)("ul",{className:"space-y-2",children:k.map(a=>(0,b.jsx)("li",{className:"py-2 flex justify-between items-center",children:(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-6 h-6 rounded-full bg-green-600 text-white text-[11px] flex items-center justify-center cursor-pointer",title:a.isGuest?a.guestName||"Guest Player":a.user?.displayName||a.user?.handle,onClick:()=>Q(a),children:(a.isGuest?a.guestName||"G":a.user?.displayName||a.user?.handle||"P").slice(0,1).toUpperCase()}),a.isGuest?(0,b.jsx)("span",{className:"text-sm",children:a.guestName||`Guest ${k.filter(a=>a.isGuest).indexOf(a)+1}`}):(0,b.jsx)("span",{className:"text-sm cursor-pointer hover:text-blue-600",onClick:()=>Q(a),children:a.user?.displayName||a.user?.handle}),!a.isGuest&&(0,b.jsx)(ab,{p:a})]})},a.id))})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-3",children:[(0,b.jsx)(h,{eventId:i.id,rosterLocked:!!i.rosterLocked,isOwner:w}),(0,b.jsx)("button",{onClick:async()=>{i&&(await fetch(`/api/events/${i.id}/snapshot`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:"manual-save"})}),alert("Saved"))},className:"border px-3 py-2 rounded",children:"Save"})]})})]}),(0,b.jsxs)("section",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"border rounded p-3 grid grid-cols-1 md:grid-cols-2 gap-4 h-48",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h2",{className:"font-medium",children:"Team 1"}),(0,b.jsx)("input",{disabled:!w,type:"color",defaultValue:Z?.color||"#dc2626",onChange:a=>{let b=a.target.value.toLowerCase();["#166534","#14532d","#065f46","#064e3b"].includes(b)?(a.target.value="#dc2626",W(1,{color:"#dc2626"})):W(1,{color:b})}})]}),(0,b.jsx)("input",{disabled:!w,className:"border rounded p-2 w-full disabled:opacity-50",placeholder:"Team name",defaultValue:Z?.name||"",onBlur:a=>W(1,{name:a.target.value||"Team 1"})}),(0,b.jsx)("select",{disabled:!w,className:"border rounded p-2 w-full disabled:opacity-50",value:Z?.formation||"",onChange:a=>W(1,{formation:a.target.value}),children:aa(0).map(a=>(0,b.jsx)("option",{value:a.v,children:a.label},a.v))}),(0,b.jsxs)("p",{className:"text-[10px] text-gray-500",children:["Players: ",Z?.formation.split("-").map(a=>parseInt(a,10)).reduce((a,b)=>a+b,0)]})]}),(0,b.jsxs)("div",{className:"space-y-2 overflow-y-auto",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Team 1 Roster"}),(0,b.jsx)("ul",{className:"space-y-1",children:o.map(a=>(0,b.jsx)("li",{className:"py-1 text-xs flex justify-between items-center",children:(0,b.jsx)("span",{children:a.participant.isGuest?a.participant.guestName||"Guest Player":a.participant.user?.displayName||a.participant.user?.handle})},a.id))})]})]}),(0,b.jsx)("div",{className:"h-48",children:(0,b.jsx)(ac,{team:Z,pos:s,setPos:t})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)("div",{className:"h-48",children:(0,b.jsx)(ac,{team:$,pos:u,setPos:v})}),(0,b.jsxs)("div",{className:"border rounded p-3 grid grid-cols-1 md:grid-cols-2 gap-4 h-48",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h2",{className:"font-medium",children:"Team 2"}),(0,b.jsx)("input",{disabled:!w,type:"color",defaultValue:$?.color||"#f59e0b",onChange:a=>{let b=a.target.value.toLowerCase();["#166534","#14532d","#065f46","#064e3b"].includes(b)?(a.target.value="#f59e0b",W(2,{color:"#f59e0b"})):W(2,{color:b})}})]}),(0,b.jsx)("input",{disabled:!w,className:"border rounded p-2 w-full disabled:opacity-50",placeholder:"Team name",defaultValue:$?.name||"",onBlur:a=>W(2,{name:a.target.value||"Team 2"})}),(0,b.jsx)("select",{disabled:!w,className:"border rounded p-2 w-full disabled:opacity-50",value:$?.formation||"",onChange:a=>W(2,{formation:a.target.value}),children:aa(0).map(a=>(0,b.jsx)("option",{value:a.v,children:a.label},a.v))}),(0,b.jsxs)("p",{className:"text-[10px] text-gray-500",children:["Players: ",$?.formation.split("-").map(a=>parseInt(a,10)).reduce((a,b)=>a+b,0)]})]}),(0,b.jsxs)("div",{className:"space-y-2 overflow-y-auto",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Team 2 Roster"}),(0,b.jsx)("ul",{className:"space-y-1",children:q.map(a=>(0,b.jsx)("li",{className:"py-1 text-xs flex justify-between items-center",children:(0,b.jsx)("span",{children:a.participant.isGuest?a.participant.guestName||"Guest Player":a.participant.user?.displayName||a.participant.user?.handle})},a.id))})]})]})]})]}),I&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>J(null),children:(0,b.jsxs)("div",{className:"bg-gray-900 rounded-xl shadow-2xl max-w-xs w-full transform transition-all border border-gray-700",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"relative px-4 py-3 border-b border-gray-700",children:[(0,b.jsx)("button",{onClick:()=>J(null),className:"absolute top-2 right-2 w-6 h-6 rounded-full hover:bg-gray-700 flex items-center justify-center transition-colors",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-600 text-white text-sm font-bold flex items-center justify-center",children:(I.isGuest?I.guestName||"G":I.user?.displayName||I.user?.handle||"P").slice(0,1).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-white text-sm",children:I.isGuest?I.guestName||"Guest Player":I.user?.displayName||I.user?.handle}),"owner"===I.role&&(0,b.jsx)("span",{className:"inline-flex items-center gap-1 bg-yellow-600 text-yellow-100 px-2 py-0.5 rounded text-xs",children:"👑 Owner"})]})]})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-900",children:[I.isGuest?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-1",children:[(0,b.jsxs)("div",{className:"text-center p-2 bg-gray-800 rounded",children:[(0,b.jsx)("div",{className:"text-sm font-bold text-red-400",children:"3"}),(0,b.jsx)("div",{className:"text-xs text-gray-400",children:"Pace"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 text-center",children:[(0,b.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 3v10a2 2 0 002 2h6a2 2 0 002-2V7H7z"})})}),(0,b.jsx)("p",{className:"text-xs text-orange-700 font-medium mb-1",children:"Shoot"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-800",children:"3"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 text-center",children:[(0,b.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,b.jsx)("p",{className:"text-xs text-blue-700 font-medium mb-1",children:"Pass"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-800",children:"3"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 text-center",children:[(0,b.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,b.jsx)("p",{className:"text-xs text-green-700 font-medium mb-1",children:"Defend"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-800",children:"3"})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl p-4 text-white text-center",children:[(0,b.jsx)("p",{className:"text-sm opacity-90 mb-1",children:"Overall Rating"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:"12"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[(0,b.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,b.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Preferred Foot"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:"Right"})]})]}):K?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[(0,b.jsx)("div",{className:"text-blue-600 mb-2",children:(0,b.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:K.pace||"-"}),(0,b.jsx)("div",{className:"text-xs font-medium text-blue-700",children:"PACE"})]}),(0,b.jsxs)("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[(0,b.jsx)("div",{className:"text-red-600 mb-2",children:(0,b.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"})})}),(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600 mb-1",children:K.shoot||"-"}),(0,b.jsx)("div",{className:"text-xs font-medium text-red-700",children:"SHOOT"})]}),(0,b.jsxs)("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[(0,b.jsx)("div",{className:"text-green-600 mb-2",children:(0,b.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600 mb-1",children:K.pass||"-"}),(0,b.jsx)("div",{className:"text-xs font-medium text-green-700",children:"PASS"})]}),(0,b.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 text-center",children:[(0,b.jsx)("div",{className:"text-purple-600 mb-2",children:(0,b.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",clipRule:"evenodd"})})}),(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:K.defend||"-"}),(0,b.jsx)("div",{className:"text-xs font-medium text-purple-700",children:"DEFEND"})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[(0,b.jsx)("div",{className:"text-gray-600 mb-2",children:(0,b.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4 4 4 0 004-4V5z"})})}),(0,b.jsx)("div",{className:"text-lg font-semibold text-gray-800 mb-1",children:"L"===K.foot?"Left Foot":"R"===K.foot?"Right Foot":"Not specified"}),(0,b.jsx)("div",{className:"text-xs font-medium text-gray-600",children:"PREFERRED FOOT"})]}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-full",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Overall Rating:"}),(0,b.jsx)("span",{className:"text-lg font-bold",children:Math.round(((K.pace||0)+(K.shoot||0)+(K.pass||0)+(K.defend||0))/4*10)/10}),(0,b.jsx)("span",{className:"text-sm",children:"/5"})]})})]}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Loading player stats..."})]}),!I.isGuest&&I.user?.badges?.length>0&&(0,b.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-100",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h5",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Achievements"}),(0,b.jsx)("div",{className:"flex justify-center gap-2 flex-wrap",children:I.user.badges.map((a,c)=>(0,b.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-yellow-900 px-3 py-1 rounded-full text-xs font-bold shadow-sm",children:["🏅 MVP Level ",a.level]},c))})]})})]})]})}),y&&(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Processing…"})]}):(0,b.jsx)("main",{className:"p-6 max-w-4xl mx-auto",children:"Loading…"})}function h({eventId:a,rosterLocked:d,isOwner:e}){let[f,g]=(0,c.useState)(null),h=async()=>{let b=await fetch(`/api/events/${a}/autobalance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"greedy",apply:!0})}),c=await b.json();g({scoreA:c.scoreA,scoreB:c.scoreB})};return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("button",{onClick:h,disabled:d||!e,className:"bg-green-600 disabled:opacity-50 text-white px-3 py-2 rounded",children:"Team-Balance"}),d&&(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Roster is locked. Auto-balance is disabled."}),f&&(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Balanced • Score A: ",f.scoreA," • Score B: ",f.scoreB]})]})}}];

//# sourceMappingURL=src_app_ev_%5Bcode%5D_teams_page_tsx_fdc04e35._.js.map