{"version":3,"sources":["turbopack:///[project]/node_modules/next/navigation.js","turbopack:///[project]/src/app/ev/[code]/history/page.tsx"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\n\ntype Snapshot = { id: string; createdAt: string; ttlAt: string };\n\nexport default function HistoryPage() {\n  const params = useParams<{ code: string }>();\n  const [eventId, setEventId] = useState<string | null>(null);\n  const [list, setList] = useState<Snapshot[]>([]);\n\n  useEffect(() => {\n    const run = async () => {\n      const code = params?.code as string;\n      const e = await fetch(`/api/events?code=${encodeURIComponent(code)}`).then(r=>r.json());\n      setEventId(e.id);\n      const l = await fetch(`/api/events/${e.id}/snapshot`).then(r=>r.json());\n      setList(l);\n    };\n    run();\n  }, [params?.code]);\n\n  return (\n    <main className=\"p-6 max-w-4xl mx-auto space-y-4\">\n      <h1 className=\"text-xl font-semibold\">History</h1>\n      {list.length===0 && <p className=\"text-sm text-gray-500\">No snapshots yet (kept 90 days).</p>}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {list.map(s=> (\n          <div key={s.id} className=\"border rounded p-3\">\n            <p className=\"font-medium\">{new Date(s.createdAt).toLocaleString()}</p>\n            <p className=\"text-xs text-gray-500\">TTL: {new Date(s.ttlAt).toLocaleDateString()}</p>\n          </div>\n        ))}\n      </div>\n    </main>\n  );\n}\n\n\n"],"names":[],"mappings":"gCAAA,EAAO,OAAO,CAAA,EAAA,CAAA,CAAA,uECEd,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAIe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAChD,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,EAAE,EAa/C,MAXA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAQR,CAPY,UACV,IAAM,EAAO,GAAQ,KACf,EAAI,MAAM,MAAM,CAAC,iBAAiB,EAAE,mBAAmB,GAAA,CAAO,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,IACpF,EAAW,EAAE,EAAE,EAEf,EADU,MAAM,AACR,MADc,CAAC,YAAY,EAAE,EAAE,EAAE,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,KAEtE,GAEF,EAAG,CAAC,GAAQ,KAAK,EAGf,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,4CACd,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,YACvB,IAAd,EAAK,MAAM,EAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,qCACzD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACZ,EAAK,GAAG,CAAC,GACR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAe,UAAU,+BACxB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,IAAI,KAAK,EAAE,SAAS,EAAE,cAAc,KAChE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAwB,QAAM,IAAI,KAAK,EAAE,KAAK,EAAE,kBAAkB,QAFvE,EAAE,EAAE,OAQxB","ignoreList":[0]}