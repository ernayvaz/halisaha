{"version":3,"sources":["turbopack:///[project]/src/app/ev/[code]/teams/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState, type Dispatch, type SetStateAction } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport { subscribe, type RealtimeEvent } from '@/lib/realtime';\nimport MatchInfo from '@/components/MatchInfo';\n\n\ntype Event = { id: string; code: string; name?: string|null; rosterLocked?: boolean; lineupLocked?: boolean };\ntype Participant = { id: string; isGuest: boolean; guestName: string|null; user?: { id: string; handle: string; displayName: string } };\ntype Team = { id: string; eventId: string; index: 1|2; name: string; color: string; formation: string };\ntype Assignment = { id: string; teamId: string; participantId: string; participant: Participant };\ntype Position = { id: string; teamId: string; participantId: string; x: number; y: number };\n\nexport default function TeamsPage() {\n  const params = useParams<{ code: string }>();\n  const router = useRouter();\n  const [eventData, setEventData] = useState<Event | null>(null);\n  const [participants, setParticipants] = useState<Participant[]>([]);\n  const [teams, setTeams] = useState<Team[]>([]);\n  const [asgnTeam1, setAsgnTeam1] = useState<Assignment[]>([]);\n  const [asgnTeam2, setAsgnTeam2] = useState<Assignment[]>([]);\n  const [posTeam1, setPosTeam1] = useState<Position[]>([]);\n  const [posTeam2, setPosTeam2] = useState<Position[]>([]);\n  const [isOwner, setIsOwner] = useState<boolean>(false);\n  const [busy, setBusy] = useState(false);\n  const [optimisticUpdate, setOptimisticUpdate] = useState<any>(null);\n  const [lastGuestAddedAt, setLastGuestAddedAt] = useState<number>(0);\n  const [guestOpen, setGuestOpen] = useState(false);\n  const [guestName, setGuestName] = useState('');\n  const [selectedPlayer, setSelectedPlayer] = useState<Participant | null>(null);\n  const [playerCard, setPlayerCard] = useState<any>(null);\n  const [debounceTimers, setDebounceTimers] = useState<Record<string, NodeJS.Timeout>>({});\n  const eventUnsubRef = useRef<() => void>(() => {});\n  const teamUnsubsRef = useRef<Record<string, () => void>>({});\n\n  const showPlayerCard = async (participant: Participant) => {\n    setSelectedPlayer(participant);\n    setPlayerCard(null);\n    \n    if (!participant.isGuest && participant.user?.id) {\n      try {\n        const response = await fetch(`/api/users/${participant.user.id}/card`);\n        if (response.ok) {\n          const card = await response.json();\n          setPlayerCard(card);\n        }\n      } catch (error) {\n        console.error('Failed to load player card:', error);\n      }\n    }\n  };\n\n  function positionsForFormation(formation: string): { x:number; y:number }[] {\n    const parts = formation.split('-').map((n)=>parseInt(n,10));\n    const a = parts[1]||0, b = parts[2]||0, c = parts[3]||0;\n    // Rotated: y positions for vertical layout (goal top, midfield bottom)\n    const ys = [0.28, 0.56, 0.86];\n    const spread = (count: number): number[] => {\n      if (count <= 0) return [];\n      if (count === 1) return [0.5];\n      const xs: number[] = [];\n      for (let i=0;i<count;i++) xs.push(0.2 + (i*(0.6/(count-1))));\n      return xs;\n    };\n    const out: {x:number;y:number}[] = [];\n    // Goalkeeper at top center\n    out.push({ x: 0.5, y: 0.14 });\n    [a,b,c].forEach((cnt, idx)=>{\n      const xs = spread(cnt);\n      xs.forEach((x)=>out.push({ x, y: ys[idx] }));\n    });\n    return out;\n  }\n\n  async function gateIfNeeded(code: string) {\n    try {\n      const e = await fetch(`/api/events?code=${encodeURIComponent(code)}`).then(r=>r.json());\n      const pr = await fetch(`/api/events/${e.id}/poll`);\n      if (!pr.ok) return;\n      const poll = await pr.json();\n      const now = new Date();\n      const startsAt = new Date(poll.startsAt);\n      const endsAt = new Date(poll.endsAt);\n      if (poll.finalized || now < startsAt || now > endsAt) return;\n      const me = await fetch('/api/me').then(r=>r.ok?r.json():null).catch(()=>null);\n      if (!me?.id) return;\n      const plist: Participant[] = await fetch(`/api/events/${e.id}/participants`).then(r=>r.json());\n      const mine = plist.find(p=>p.user?.id===me.id);\n      if (!mine) return;\n      const hasVoted = Array.isArray(poll.votes) && poll.votes.some((v:any)=>v.voterParticipantId===mine.id);\n      if (!hasVoted) router.push(`/ev/${code}/mvp`);\n    } catch {}\n  }\n\n  useEffect(() => {\n    const code = params?.code as string;\n    if (!code) return;\n    gateIfNeeded(code);\n    const run = async () => {\n      const e = await fetch(`/api/events?code=${encodeURIComponent(code)}`).then(r=>r.json());\n      setEventData(e);\n      const [plist, initialTlist, me] = await Promise.all([\n        fetch(`/api/events/${e.id}/participants`).then((r)=>r.json()),\n        fetch(`/api/events/${e.id}/teams`).then((r)=>r.json()),\n        fetch('/api/me').then(r=>r.ok?r.json():null).catch(()=>null),\n      ]);\n      setParticipants(plist); \n      \n      // Ensure teams exist immediately\n      let tlist = initialTlist;\n      if (tlist.length === 0) {\n        // Create default teams if none exist\n        const [t1, t2] = await Promise.all([\n          fetch(`/api/events/${e.id}/teams`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ index: 1, name: 'Team 1', color: '#dc2626' }) }).then(r=>r.json()),\n          fetch(`/api/events/${e.id}/teams`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ index: 2, name: 'Team 2', color: '#f59e0b' }) }).then(r=>r.json())\n        ]);\n        tlist = [t1, t2];\n      }\n      setTeams(tlist);\n      \n      if (me?.id) {\n        const mine = plist.find((p: Participant)=>p.user?.id === me.id);\n        setIsOwner(mine?.role === 'owner');\n      } else setIsOwner(false);\n      await ensureFormationIfMissing(e.id, tlist, {});\n      await refreshTeamData(e.id, tlist);\n    };\n    run();\n    // Event-level subscription (participants/teams/flags)\n    eventUnsubRef.current?.();\n    (async () => {\n      const e = await fetch(`/api/events?code=${encodeURIComponent(code)}`).then(x=>x.json());\n      eventUnsubRef.current = subscribe(e.id, (evt: RealtimeEvent) => {\n        // Skip updates during optimistic windows to prevent assignment resets\n        if (optimisticUpdate && Date.now() - optimisticUpdate < 1500) return;\n        if (lastGuestAddedAt && Date.now() - lastGuestAddedAt < 2000) return;\n        \n        if (evt.type === 'participants_updated') {\n          fetch(`/api/events/${e.id}/participants`).then(r => r.json()).then(setParticipants).catch(() => {});\n        } else if (evt.type === 'teams_updated') {\n          (async () => {\n            const tlist = await fetch(`/api/events/${e.id}/teams`).then(r => r.json());\n            setTeams(tlist);\n            // Rewire team-level subscriptions on team changes\n            setupTeamSubscriptions(tlist);\n          })().catch(()=>{});\n        } else if (evt.type === 'positions_updated') {\n          if (team1?.id) fetch(`/api/teams/${team1.id}/positions`).then(r=>r.json()).then(setPosTeam1).catch(()=>{});\n          if (team2?.id) fetch(`/api/teams/${team2.id}/positions`).then(r=>r.json()).then(setPosTeam2).catch(()=>{});\n        } else if (evt.type === 'flags_updated') {\n          fetch(`/api/events?code=${encodeURIComponent(code)}`).then(r=>r.json()).then(setEventData).catch(()=>{});\n        }\n      });\n    })();\n    return () => {\n      try { eventUnsubRef.current?.(); } catch {}\n      // Teardown team subscriptions\n      const subs = teamUnsubsRef.current; teamUnsubsRef.current = {};\n      Object.values(subs).forEach((u)=>{ try { u(); } catch {} });\n    };\n  }, [params?.code]);\n\n  const setupTeamSubscriptions = (tlist: Team[]) => {\n    // Unsubscribe from teams that are no longer present\n    const current = teamUnsubsRef.current;\n    const nextIds = new Set(tlist.map(t=>t.id));\n    for (const [tid, unsub] of Object.entries(current)) {\n      if (!nextIds.has(tid)) { try { unsub(); } catch {} delete current[tid]; }\n    }\n    // Subscribe to new teams\n    for (const t of tlist) {\n      if (!current[t.id]) {\n        current[t.id] = subscribe(t.id, (evt: RealtimeEvent) => {\n          if (evt.type === 'positions_updated' && evt.teamId === t.id) {\n            fetch(`/api/teams/${t.id}/positions`).then(r=>r.json()).then((list)=>{\n              if (t.index===1) setPosTeam1(list); else setPosTeam2(list);\n            }).catch(()=>{});\n          }\n        });\n      }\n    }\n    teamUnsubsRef.current = current;\n  };\n\n  const ensureFormationIfMissing = async (eventId: string, tlist: Team[], counts: Record<string, number>) => {\n    for (const t of tlist) {\n      if (!t.formation) {\n        const n = counts[t.id] || 0;\n        const opts = optionsForSize(n).map(o=>o.v);\n        const pick = opts.length ? opts[Math.floor(Math.random()*opts.length)] : '1-2-2-1';\n        await fetch(`/api/events/${eventId}/teams`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ index: t.index, name: t.name, formation: pick }) });\n      }\n    }\n  };\n\n  const refreshTeamData = async (eventId: string, tlist: Team[]) => {\n    const t1 = tlist.find(t=>t.index===1);\n    const t2 = tlist.find(t=>t.index===2);\n    if (t1) {\n      const [p] = await Promise.all([\n        fetch(`/api/teams/${t1.id}/positions`).then(r=>r.json()),\n      ]);\n      setPosTeam1(p);\n    }\n    if (t2) {\n      const [p] = await Promise.all([\n        fetch(`/api/teams/${t2.id}/positions`).then(r=>r.json()),\n      ]);\n      setPosTeam2(p);\n    }\n  };\n\n  const team = (idx: 1|2) => teams.find(t=>t.index===idx) as Team | undefined;\n\n  const upsertTeam = async (index: 1|2, partial: Partial<Pick<Team,'name'|'color'|'formation'>>) => {\n    if (!eventData || !isOwner || busy) return;\n    setBusy(true);\n    \n          // Optimistic update\n      const currentTeam = team(index);\n      const defaultColors = { 1: '#dc2626', 2: '#f59e0b' }; // dark red, sunset yellow\n      const updatedTeam = { \n        ...currentTeam, \n        name: partial.name ?? currentTeam?.name ?? `Team ${index}`, \n        color: partial.color ?? currentTeam?.color ?? defaultColors[index],\n        formation: partial.formation ?? currentTeam?.formation ?? '1-2-2-1'\n      };\n    const other = teams.filter(x=>x.index!==index);\n    setTeams([...other, updatedTeam as Team].sort((a,b)=>a.index-b.index));\n    \n    try {\n    const body = { index, name: partial.name ?? team(index)?.name ?? `Team ${index}`, color: partial.color ?? team(index)?.color, formation: partial.formation ?? team(index)?.formation };\n    const r = await fetch(`/api/events/${eventData.id}/teams`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });\n    const t = await r.json();\n      const finalOther = teams.filter(x=>x.index!==index);\n      setTeams([...finalOther, t].sort((a,b)=>a.index-b.index));\n    } catch (error) {\n      console.error('Team update failed:', error);\n      // Revert optimistic update on error\n      const revertOther = teams.filter(x=>x.index!==index);\n      setTeams([...revertOther, currentTeam as Team].sort((a,b)=>a.index-b.index));\n    }\n    setBusy(false);\n  };\n\n  const toggleRosterLock = async () => {\n    if (!eventData || !isOwner) return;\n    const r = await fetch(`/api/events/${eventData.id}/flags`, { method: 'PATCH', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ rosterLocked: !eventData.rosterLocked }) });\n    if (r.ok) {\n      const d = await r.json();\n      setEventData({ ...eventData, rosterLocked: d.rosterLocked });\n    }\n  };\n\n  const resetEvent = async () => {\n    if (!eventData || !isOwner) return;\n    if (!confirm('Reset teams and positions? Players will be kept.')) return;\n    setBusy(true);\n    const r = await fetch(`/api/events/${eventData.id}`, { method: 'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ action: 'soft_reset' }) });\n    if (r.ok) {\n      const [plist, tlist] = await Promise.all([\n        fetch(`/api/events/${eventData.id}/participants`).then((r)=>r.json()),\n        fetch(`/api/events/${eventData.id}/teams`).then((r)=>r.json()),\n      ]);\n      setParticipants(plist);\n      setTeams(tlist);\n      await refreshTeamData(eventData.id, tlist);\n    }\n    setBusy(false);\n  };\n\n  const team1 = useMemo(()=>team(1), [teams]);\n  const team2 = useMemo(()=>team(2), [teams]);\n\n  // Auto-update formations when team sizes change\n  useEffect(() => {\n    if (!isOwner || !eventData) return;\n    \n    const updateFormationIfNeeded = async (team: Team) => {\n      const autoFormation = getAutoFormation(team.formation.split('-').map(n=>parseInt(n,10)).reduce((sum,n)=>sum+n,0));\n      if (team.formation !== autoFormation) {\n        await upsertTeam(team.index as 1|2, { formation: autoFormation });\n      }\n    };\n\n    if (team1) {\n      updateFormationIfNeeded(team1);\n    }\n    if (team2) {\n      updateFormationIfNeeded(team2);\n    }\n  }, [team1?.id, team2?.id, isOwner, eventData?.id]);\n\n  const getAutoFormation = (playerCount: number): string => {\n    // Always goalkeeper first, then distribute symmetrically\n    if (playerCount <= 1) return '1-0-0-0'; // Just goalkeeper\n    if (playerCount === 2) return '1-1-0-0'; // Goalkeeper + 1 defender\n    if (playerCount === 3) return '1-1-1-0'; // Goalkeeper + 1 defender + 1 midfielder\n    if (playerCount === 4) return '1-1-1-1'; // Goalkeeper + 1 defender + 1 midfielder + 1 forward\n    if (playerCount === 5) return '1-2-1-1'; // Goalkeeper + 2 defenders + 1 midfielder + 1 forward\n    if (playerCount === 6) return '1-2-2-1'; // Goalkeeper + 2 defenders + 2 midfielders + 1 forward\n    if (playerCount === 7) return '1-2-2-2'; // Goalkeeper + 2 defenders + 2 midfielders + 2 forwards\n    if (playerCount === 8) return '1-3-2-2'; // Goalkeeper + 3 defenders + 2 midfielders + 2 forwards\n    if (playerCount === 9) return '1-3-3-2'; // Goalkeeper + 3 defenders + 3 midfielders + 2 forwards\n    if (playerCount === 10) return '1-3-3-3'; // Goalkeeper + 3 defenders + 3 midfielders + 3 forwards\n    // For 11+ players, keep adding in cycles: defender, midfielder, forward\n    const excess = playerCount - 10;\n    const base = [3, 3, 3]; // [defenders, midfielders, forwards]\n    for (let i = 0; i < excess; i++) {\n      base[i % 3]++; // Add to defender, midfielder, forward in cycle\n    }\n    return `1-${base[0]}-${base[1]}-${base[2]}`;\n  };\n\n  const optionsForSize = (n: number) => {\n    const autoFormation = getAutoFormation(n);\n    const res: { v: string; label: string }[] = [\n      { v: autoFormation, label: `${autoFormation} (Auto)` }\n    ];\n    \n    // Add some manual options for flexibility\n    const seen = new Set<string>([autoFormation]);\n    \n    if (n >= 3) {\n      // Add a few common formations as alternatives\n      const common = ['1-2-2-1', '1-1-2-1', '1-2-1-1'];\n      for (const formation of common) {\n        if (!seen.has(formation)) {\n          seen.add(formation);\n          res.push({ v: formation, label: formation });\n        }\n      }\n    }\n    \n    return res;\n  };\n\n  function textColorFor(bg: string): string {\n    const m = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(bg);\n    if (!m) return '#000';\n    const r = parseInt(m[1],16), g = parseInt(m[2],16), b = parseInt(m[3],16);\n    const lum = (0.2126*r + 0.7152*g + 0.0722*b)/255;\n    return lum < 0.5 ? '#fff' : '#000';\n  }\n  const bubble = (name: string, color?: string) => {\n    const bg = color || '#86efac';\n    const fg = textColorFor(bg);\n    return (\n      <div className=\"w-6 h-6 rounded-full border-2 border-white shadow flex items-center justify-center text-[10px] font-semibold\" style={{ backgroundColor: bg, color: fg }} title={name}>\n        {(name||'?').slice(0,1).toUpperCase()}\n      </div>\n    );\n  };\n\n  const MVPBadge = ({ p }: { p: Participant }) => {\n    const b = (p.user as any)?.badges && (p.user as any).badges[0];\n    if (!b) return null;\n    return <span title={`MVP Lv${b.level}`} className=\"ml-1 text-[10px]\">🏅</span>;\n  };\n\n  const HalfField = ({ team, pos, setPos }: { team?: Team; pos: Position[]; setPos: Dispatch<SetStateAction<Position[]>> }) => {\n    const fieldRef = useRef<HTMLDivElement | null>(null);\n    const draggingRef = useRef<{ id: string } | null>(null);\n    if (!team) return null;\n    const labelFor = (pid: string) => {\n      const a = asgnTeam1.find(x=>x.participantId===pid);\n      if (!a) return 'Player';\n      if (a.participant.isGuest) return a.participant.guestName || 'Guest';\n      return a.participant.user?.displayName || a.participant.user?.handle || 'Player';\n    };\n    const tokenPos = (idx: number, pid: string) => {\n      const p = pos.find(x=>x.participantId===pid);\n      if (p) return { x: p.x, y: p.y };\n      const preset = positionsForFormation(team.formation);\n      if (idx < preset.length) {\n        const basePos = preset[idx];\n        // Team 2 gets inverted field (goal bottom, midfield top)\n        if (team.index === 2) {\n          return { x: basePos.x, y: 1 - basePos.y };\n        }\n        return basePos;\n      }\n      const k = idx - preset.length; const row = k % 4; const col = Math.floor(k/4);\n      return { x: Math.min(0.95, 0.65 + col*0.1), y: 0.2 + row*0.2 };\n    };\n    const clamp = (v:number,min:number,max:number)=>Math.min(Math.max(v,min),max);\n    const onPointerDown = (e: React.PointerEvent<HTMLDivElement>, pid: string) => {\n      if (!fieldRef.current) return;\n      if (eventData?.lineupLocked && !isOwner) return;\n      draggingRef.current = { id: pid };\n      try { (e.target as Element).setPointerCapture(e.pointerId); } catch {}\n    };\n    const onPointerMove = (e: React.PointerEvent<HTMLDivElement>) => {\n      if (!fieldRef.current || !draggingRef.current) return;\n      const rect = fieldRef.current.getBoundingClientRect();\n      const x = clamp((e.clientX - rect.left)/rect.width,0,1);\n      const y = clamp((e.clientY - rect.top)/rect.height,0,1);\n      const id = draggingRef.current.id;\n      setPos(prev=>{\n        const idx = prev.findIndex(p=>p.participantId===id);\n        if (idx>=0){ const copy=[...prev]; copy[idx] = { ...copy[idx], x, y }; return copy; }\n        return [...prev, { id: `tmp-${id}`, teamId: team.id, participantId: id, x, y }];\n      });\n    };\n    const onPointerUp = async () => {\n      if (!draggingRef.current || !team) return;\n      const id = draggingRef.current.id; draggingRef.current = null;\n      const posi = pos.find(p=>p.participantId===id);\n      if (!posi) return;\n      if (!eventData?.lineupLocked || isOwner) {\n        if (isOwner) {\n        await fetch(`/api/teams/${team.id}/positions`, { method:'PATCH', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ participantId:id, x: posi.x, y: posi.y }) });\n        const fresh = await fetch(`/api/teams/${team.id}/positions`).then(r=>r.json()); setPos(fresh);\n        }\n        // For non-owners, just update local state for preview\n      }\n    };\n\n    const isTeam2 = team.index === 2;\n\n    return (\n      <div ref={fieldRef} onPointerMove={onPointerMove} onPointerUp={onPointerUp} className=\"relative w-full h-48 bg-green-700 rounded overflow-hidden border-2 border-gray-300\">\n        {/* Main field boundary */}\n        <div className=\"absolute inset-2 border-2 border-white rounded-sm\" />\n        \n        {isTeam2 ? (\n          /* Team 2: Goal bottom, midfield top */\n          <>\n            {/* Goal area (bottom) */}\n            <div className=\"absolute bottom-2 left-[15%] w-[70%] h-[28%] border-2 border-white\" />\n            {/* 6-yard box (bottom) */}\n            <div className=\"absolute bottom-2 left-[35%] w-[30%] h-[12%] border-2 border-white\" />\n            {/* Penalty spot */}\n            <div className=\"absolute w-1.5 h-1.5 bg-white rounded-full\" style={{ left: '50%', bottom: '18%', transform: 'translateX(-50%)' }} />\n            {/* Center circle */}\n            <div className=\"absolute left-1/2 -translate-x-1/2 -top-8 w-20 h-20 border-2 border-white rounded-full\" />\n          </>\n        ) : (\n          /* Team 1: Goal top, midfield bottom */\n          <>\n            {/* Goal area (top) */}\n            <div className=\"absolute top-2 left-[15%] w-[70%] h-[28%] border-2 border-white\" />\n            {/* 6-yard box (top) */}\n            <div className=\"absolute top-2 left-[35%] w-[30%] h-[12%] border-2 border-white\" />\n            {/* Penalty spot */}\n            <div className=\"absolute w-1.5 h-1.5 bg-white rounded-full\" style={{ left: '50%', top: '18%', transform: 'translateX(-50%)' }} />\n            {/* Center circle */}\n            <div className=\"absolute left-1/2 -translate-x-1/2 -bottom-8 w-20 h-20 border-2 border-white rounded-full\" />\n          </>\n        )}\n\n        {asgnTeam1.map((a, i)=>{\n          const posi = tokenPos(i, a.participantId);\n          const label = labelFor(a.participantId);\n          const part = a.participant;\n          return (\n            <div key={a.id} className=\"absolute\" style={{ left: `${posi.x*100}%`, top: `${posi.y*100}%`, transform:'translate(-50%,-50%)' }} \n                 onPointerDown={(e)=>onPointerDown(e, a.participantId)}\n                 onClick={(e) => {\n                   e.stopPropagation();\n                   showPlayerCard(part);\n                 }}>\n              <div className=\"relative cursor-pointer flex flex-col items-center\">\n              <div className=\"relative\">\n                {bubble(label, team.color)}\n                {!part.isGuest && (\n                  <span className=\"absolute -top-2 -right-2 text-[10px]\">{(part.user as any)?.badges?.length? '🏅':''}</span>\n                )}\n                </div>\n                <div className=\"text-[8px] text-white font-medium mt-1 max-w-[50px] truncate bg-black/70 rounded px-1 text-center\">\n                  {label}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  if (!eventData) return <main className=\"p-6 max-w-4xl mx-auto\">Loading…</main>;\n\n  return (\n    <main className=\"p-6 max-w-4xl mx-auto space-y-6\">\n      <MatchInfo eventCode={params.code} title=\"Teams\" />\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <button onClick={toggleRosterLock} disabled={!isOwner} className=\"border px-3 py-1 rounded disabled:opacity-50\">Roster Lock: {eventData.rosterLocked? 'On':'Off'}</button>\n          <button onClick={resetEvent} disabled={!isOwner} className=\"border px-3 py-1 rounded text-red-600 disabled:opacity-50\">Reset Event</button>\n        </div>\n      </div>\n      <p className=\"text-sm text-gray-500\">Assign players via → buttons or use Auto-balance. Only the creator can change teams and positions.</p>\n      {!isOwner && <p className=\"text-xs text-gray-500\">You can rearrange locally for preview. Changes are not saved.</p>}\n\n      {/* Players Section - Top */}\n      <section className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div className=\"border rounded p-3\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <h3 className=\"font-medium\">Players</h3>\n          </div>\n          <ul className=\"space-y-2\">\n            {participants.map((p)=> (\n              <li key={p.id} className=\"py-2 flex justify-between items-center\">\n                <span className=\"flex items-center gap-1\">\n                  <div className=\"w-6 h-6 rounded-full bg-green-600 text-white text-[11px] flex items-center justify-center cursor-pointer\" \n                       title={p.isGuest ? (p.guestName || 'Guest Player') : (p.user?.displayName || p.user?.handle)}\n                       onClick={() => showPlayerCard(p)}>\n                    {(p.isGuest ? (p.guestName || 'G') : (p.user?.displayName || p.user?.handle || 'P')).slice(0,1).toUpperCase()}\n                  </div>\n                  {p.isGuest ? (\n                    <span className=\"text-sm\">{p.guestName || `Guest ${participants.filter(x=>x.isGuest).indexOf(p)+1}`}</span>\n                  ) : (\n                    <span className=\"text-sm cursor-pointer hover:text-blue-600\" onClick={() => showPlayerCard(p)}>{p.user?.displayName || p.user?.handle}</span>\n                  )}\n                  {!p.isGuest && <MVPBadge p={p} />}\n                </span>\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div>\n          <div className=\"flex flex-wrap items-center justify-end gap-3\">\n            <TeamBalance eventId={eventData.id} rosterLocked={Boolean(eventData.rosterLocked)} isOwner={isOwner} />\n            <button onClick={async()=>{ if (!eventData) return; await fetch(`/api/events/${eventData.id}/snapshot`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ note: 'manual-save' }) }); alert('Saved'); }} className=\"border px-3 py-2 rounded\">Save</button>\n          </div>\n        </div>\n      </section>\n\n      {/* Teams Layout: Aligned boxes and fields with matching heights */}\n      <section className=\"space-y-6\">\n        {/* Top Row: Team 1 Box + Team 1 Field (same height) */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Team 1 Box */}\n          <div className=\"border rounded p-3 grid grid-cols-1 md:grid-cols-2 gap-4 h-48\">\n            {/* Team 1 Left: Settings */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center gap-2\">\n                <h2 className=\"font-medium\">Team 1</h2>\n                <input disabled={!isOwner} type=\"color\" defaultValue={team1?.color||'#dc2626'} onChange={(e)=>{ const v=e.target.value.toLowerCase(); // forbid pitch-like dark green\n                  if (['#166534','#14532d','#065f46','#064e3b'].includes(v)) { e.target.value = '#dc2626'; upsertTeam(1,{color:'#dc2626'}); } else { upsertTeam(1,{color:v}); } }} />\n              </div>\n              <input disabled={!isOwner} className=\"border rounded p-2 w-full disabled:opacity-50\" placeholder=\"Team name\" defaultValue={team1?.name||''} onBlur={(e)=>upsertTeam(1,{name:e.target.value||'Team 1'})} />\n              <select disabled={!isOwner} className=\"border rounded p-2 w-full disabled:opacity-50\" value={team1?.formation||''} onChange={(e)=>upsertTeam(1,{formation:e.target.value})}>\n                {optionsForSize(0).map(o=> (\n                  <option key={o.v} value={o.v}>{o.label}</option>\n                ))}\n              </select>\n              <p className=\"text-[10px] text-gray-500\">Players: {team1?.formation.split('-').map(n=>parseInt(n,10)).reduce((sum,n)=>sum+n,0)}</p>\n            </div>\n              \n            {/* Team 1 Right: Roster */}\n            <div className=\"space-y-2 overflow-y-auto\">\n              <h3 className=\"font-medium\">Team 1 Roster</h3>\n              <ul className=\"space-y-1\">\n                {asgnTeam1.map(a=> (\n                  <li key={a.id} className=\"py-1 text-xs flex justify-between items-center\">\n                    <span>{a.participant.isGuest ? (a.participant.guestName||'Guest Player') : (a.participant.user?.displayName || a.participant.user?.handle)}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n          \n          {/* Team 1 Field - matching height */}\n          <div className=\"h-48\">\n            <HalfField team={team1} pos={posTeam1} setPos={setPosTeam1} />\n          </div>\n        </div>\n\n        {/* Bottom Row: Team 2 Field + Team 2 Box (same height) */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Team 2 Field - matching height */}\n          <div className=\"h-48\">\n            <HalfField team={team2} pos={posTeam2} setPos={setPosTeam2} />\n          </div>\n          \n          {/* Team 2 Box */}\n          <div className=\"border rounded p-3 grid grid-cols-1 md:grid-cols-2 gap-4 h-48\">\n            {/* Team 2 Left: Settings */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center gap-2\">\n                <h2 className=\"font-medium\">Team 2</h2>\n                <input disabled={!isOwner} type=\"color\" defaultValue={team2?.color||'#f59e0b'} onChange={(e)=>{ const v=e.target.value.toLowerCase(); if (['#166534','#14532d','#065f46','#064e3b'].includes(v)) { e.target.value = '#f59e0b'; upsertTeam(2,{color:'#f59e0b'}); } else { upsertTeam(2,{color:v}); } }} />\n              </div>\n              <input disabled={!isOwner} className=\"border rounded p-2 w-full disabled:opacity-50\" placeholder=\"Team name\" defaultValue={team2?.name||''} onBlur={(e)=>upsertTeam(2,{name:e.target.value||'Team 2'})} />\n              <select disabled={!isOwner} className=\"border rounded p-2 w-full disabled:opacity-50\" value={team2?.formation||''} onChange={(e)=>upsertTeam(2,{formation:e.target.value})}>\n                {optionsForSize(0).map(o=> (\n                  <option key={o.v} value={o.v}>{o.label}</option>\n                ))}\n              </select>\n              <p className=\"text-[10px] text-gray-500\">Players: {team2?.formation.split('-').map(n=>parseInt(n,10)).reduce((sum,n)=>sum+n,0)}</p>\n            </div>\n              \n            {/* Team 2 Right: Roster */}\n            <div className=\"space-y-2 overflow-y-auto\">\n              <h3 className=\"font-medium\">Team 2 Roster</h3>\n              <ul className=\"space-y-1\">\n                {asgnTeam2.map(a=> (\n                  <li key={a.id} className=\"py-1 text-xs flex justify-between items-center\">\n                    <span>{a.participant.isGuest ? (a.participant.guestName||'Guest Player') : (a.participant.user?.displayName || a.participant.user?.handle)}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Minimal Dark Player Card Modal */}\n      {selectedPlayer && (\n        <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4\" onClick={() => setSelectedPlayer(null)}>\n          <div className=\"bg-gray-900 rounded-xl shadow-2xl max-w-xs w-full transform transition-all border border-gray-700\" onClick={(e) => e.stopPropagation()}>\n            {/* Header */}\n            <div className=\"relative px-4 py-3 border-b border-gray-700\">\n              <button \n                onClick={() => setSelectedPlayer(null)} \n                className=\"absolute top-2 right-2 w-6 h-6 rounded-full hover:bg-gray-700 flex items-center justify-center transition-colors\"\n              >\n                <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n              \n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-green-600 text-white text-sm font-bold flex items-center justify-center\">\n                  {(selectedPlayer.isGuest ? (selectedPlayer.guestName || 'G') : (selectedPlayer.user?.displayName || selectedPlayer.user?.handle || 'P')).slice(0,1).toUpperCase()}\n                </div>\n                <div>\n                  <h4 className=\"font-medium text-white text-sm\">\n                    {selectedPlayer.isGuest ? (selectedPlayer.guestName || 'Guest Player') : (selectedPlayer.user?.displayName || selectedPlayer.user?.handle)}\n                  </h4>\n                  {(selectedPlayer as any).role === 'owner' && (\n                    <span className=\"inline-flex items-center gap-1 bg-yellow-600 text-yellow-100 px-2 py-0.5 rounded text-xs\">\n                      👑 Owner\n                    </span>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-4 bg-gray-900\">\n                             {selectedPlayer.isGuest ? (\n                 <div className=\"space-y-2\">\n                   {/* Guest Stats */}\n                   <div className=\"grid grid-cols-4 gap-1\">\n                     <div className=\"text-center p-2 bg-gray-800 rounded\">\n                       <div className=\"text-sm font-bold text-red-400\">3</div>\n                       <div className=\"text-xs text-gray-400\">Pace</div>\n                     </div>\n                     \n                     {/* Shoot */}\n                     <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 text-center\">\n                       <div className=\"flex items-center justify-center mb-2\">\n                         <svg className=\"w-5 h-5 text-orange-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                           <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 3v10a2 2 0 002 2h6a2 2 0 002-2V7H7z\" />\n                         </svg>\n                       </div>\n                       <p className=\"text-xs text-orange-700 font-medium mb-1\">Shoot</p>\n                       <p className=\"text-2xl font-bold text-orange-800\">3</p>\n                     </div>\n                     \n                     {/* Pass */}\n                     <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 text-center\">\n                       <div className=\"flex items-center justify-center mb-2\">\n                         <svg className=\"w-5 h-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                           <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\" />\n                         </svg>\n                       </div>\n                       <p className=\"text-xs text-blue-700 font-medium mb-1\">Pass</p>\n                       <p className=\"text-2xl font-bold text-blue-800\">3</p>\n                     </div>\n                     \n                     {/* Defend */}\n                     <div className=\"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 text-center\">\n                       <div className=\"flex items-center justify-center mb-2\">\n                         <svg className=\"w-5 h-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                           <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n                         </svg>\n                       </div>\n                       <p className=\"text-xs text-green-700 font-medium mb-1\">Defend</p>\n                       <p className=\"text-2xl font-bold text-green-800\">3</p>\n                     </div>\n                   </div>\n                   \n                   {/* Overall Rating */}\n                   <div className=\"bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl p-4 text-white text-center\">\n                     <p className=\"text-sm opacity-90 mb-1\">Overall Rating</p>\n                     <p className=\"text-3xl font-bold\">12</p>\n                   </div>\n                   \n                   {/* Preferred Foot */}\n                   <div className=\"bg-gray-50 rounded-xl p-4 text-center\">\n                     <div className=\"flex items-center justify-center mb-2\">\n                       <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                         <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n                       </svg>\n                     </div>\n                     <p className=\"text-sm text-gray-600 font-medium mb-1\">Preferred Foot</p>\n                     <p className=\"text-lg font-semibold text-gray-800\">Right</p>\n                   </div>\n                 </div>\n               ) : playerCard ? (\n                <div className=\"space-y-6\">\n                  {/* Stats Grid */}\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"bg-blue-50 rounded-xl p-4 text-center\">\n                      <div className=\"text-blue-600 mb-2\">\n                        <svg className=\"w-6 h-6 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                        </svg>\n                      </div>\n                      <div className=\"text-2xl font-bold text-blue-600 mb-1\">{playerCard.pace || '-'}</div>\n                      <div className=\"text-xs font-medium text-blue-700\">PACE</div>\n                    </div>\n                    \n                    <div className=\"bg-red-50 rounded-xl p-4 text-center\">\n                      <div className=\"text-red-600 mb-2\">\n                        <svg className=\"w-6 h-6 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z\" />\n                        </svg>\n                      </div>\n                      <div className=\"text-2xl font-bold text-red-600 mb-1\">{playerCard.shoot || '-'}</div>\n                      <div className=\"text-xs font-medium text-red-700\">SHOOT</div>\n                    </div>\n                    \n                    <div className=\"bg-green-50 rounded-xl p-4 text-center\">\n                      <div className=\"text-green-600 mb-2\">\n                        <svg className=\"w-6 h-6 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                        </svg>\n                      </div>\n                      <div className=\"text-2xl font-bold text-green-600 mb-1\">{playerCard.pass || '-'}</div>\n                      <div className=\"text-xs font-medium text-green-700\">PASS</div>\n                    </div>\n                    \n                    <div className=\"bg-purple-50 rounded-xl p-4 text-center\">\n                      <div className=\"text-purple-600 mb-2\">\n                        <svg className=\"w-6 h-6 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" clipRule=\"evenodd\" />\n                        </svg>\n                      </div>\n                      <div className=\"text-2xl font-bold text-purple-600 mb-1\">{playerCard.defend || '-'}</div>\n                      <div className=\"text-xs font-medium text-purple-700\">DEFEND</div>\n                    </div>\n                  </div>\n\n                  {/* Preferred Foot */}\n                  <div className=\"bg-gray-50 rounded-xl p-4 text-center\">\n                    <div className=\"text-gray-600 mb-2\">\n                      <svg className=\"w-6 h-6 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4 4 4 0 004-4V5z\" />\n                      </svg>\n                    </div>\n                    <div className=\"text-lg font-semibold text-gray-800 mb-1\">\n                      {playerCard.foot === 'L' ? 'Left Foot' : playerCard.foot === 'R' ? 'Right Foot' : 'Not specified'}\n                    </div>\n                    <div className=\"text-xs font-medium text-gray-600\">PREFERRED FOOT</div>\n                  </div>\n\n                  {/* Overall Rating */}\n                  <div className=\"text-center\">\n                    <div className=\"inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-full\">\n                      <span className=\"text-sm font-medium\">Overall Rating:</span>\n                      <span className=\"text-lg font-bold\">\n                        {Math.round(((playerCard.pace || 0) + (playerCard.shoot || 0) + (playerCard.pass || 0) + (playerCard.defend || 0)) / 4 * 10) / 10}\n                </span>\n                      <span className=\"text-sm\">/5</span>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n                  <p className=\"text-gray-500\">Loading player stats...</p>\n                </div>\n              )}\n              \n              {/* Badges */}\n              {!selectedPlayer.isGuest && (selectedPlayer.user as any)?.badges?.length > 0 && (\n                <div className=\"mt-6 pt-6 border-t border-gray-100\">\n                  <div className=\"text-center\">\n                    <h5 className=\"text-sm font-semibold text-gray-700 mb-3\">Achievements</h5>\n                    <div className=\"flex justify-center gap-2 flex-wrap\">\n                      {(selectedPlayer.user as any).badges.map((badge: any, i: number) => (\n                        <div key={i} className=\"bg-gradient-to-r from-yellow-400 to-yellow-500 text-yellow-900 px-3 py-1 rounded-full text-xs font-bold shadow-sm\">\n                          🏅 MVP Level {badge.level}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n        </div>\n          </div>\n        </div>\n      )}\n      \n      {busy && <p className=\"text-sm text-gray-500\">Processing…</p>}\n    </main>\n  );\n}\n\nfunction TeamBalance({ eventId, rosterLocked, isOwner }: { eventId: string; rosterLocked: boolean; isOwner: boolean }) {\n  const [preview, setPreview] = useState<{ scoreA: number; scoreB: number } | null>(null);\n  const run = async () => {\n    const r = await fetch(`/api/events/${eventId}/autobalance`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ method: 'greedy', apply: true }) });\n    const d = await r.json();\n    setPreview({ scoreA: d.scoreA, scoreB: d.scoreB });\n  };\n  return (\n    <div className=\"space-y-2\">\n      <button onClick={run} disabled={rosterLocked || !isOwner} className=\"bg-green-600 disabled:opacity-50 text-white px-3 py-2 rounded\">Team-Balance</button>\n      {rosterLocked && <p className=\"text-xs text-gray-500\">Roster is locked. Auto-balance is disabled.</p>}\n      {preview && <p className=\"text-sm text-gray-600\">Balanced • Score A: {preview.scoreA} • Score B: {preview.scoreB}</p>}\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}