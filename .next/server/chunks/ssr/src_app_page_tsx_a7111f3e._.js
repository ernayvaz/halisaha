module.exports=[40777,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(87924),c=a.i(72131);function d(a,b,c){return Math.min(Math.max(a,b),c)}function e(){let[a,e]=(0,c.useState)("Pickup Match"),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(60),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)({}),[p,q]=(0,c.useState)(!1),r=(0,c.useMemo)(()=>{let b={};(!a||a.trim().length<2)&&(b.name="Event name is required"),f&&function(a){let b=/^(\d{2})-(\d{2})-(\d{4})$/.exec(a);if(!b)return!1;let c=Number(b[1]),d=Number(b[2]);return b[3],!(d<1)&&!(d>12)&&!(c<1)&&!(c>31)}(f)||(b.date="Date must be DD-MM-YYYY"),h&&/^([01]\d|2[0-3]):([0-5]\d)$/.test(h)||(b.startTime="Start time must be HH:MM (24h)");let[c,d,e]=(f||"").split("-").map(a=>parseInt(a,10)),[g,i]=(h||"").split(":").map(a=>parseInt(a,10));return Number.isFinite(c)&&Number.isFinite(d)&&Number.isFinite(e)&&Number.isFinite(g)&&Number.isFinite(i)&&new Date(e,d-1,c,g,i,0,0).getTime()<Date.now()&&(b.date="Date/time cannot be in the past"),(!Number.isFinite(Number(j))||j<=0||j>300)&&(b.durationMinutes="Duration must be 1-300 minutes"),b},[a,f,h,j]),s=async()=>{if(q(!0),o(r),Object.keys(r).length>0)return void q(!1);let b=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,date:f,startTime:h,durationMinutes:j})}),c=await b.json();b.ok&&c.code?(m(c.code),o({})):o("validation_error"===c.error&&c.details?c.details:{form:c.error||"Error"}),q(!1)},t=l?`/ev/${l}`:"";return(0,b.jsxs)("main",{className:"p-6 max-w-2xl mx-auto space-y-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Create Football Event âš½"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Event Name"}),(0,b.jsx)("input",{className:"border rounded p-2 w-full",value:a,onChange:a=>e(a.target.value)}),n.name&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:n.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Date"}),(0,b.jsx)("input",{type:"date",className:"border rounded p-2 w-full",value:(()=>{let a=/^(\d{2})-(\d{2})-(\d{4})$/.exec(f);return a?`${a[3]}-${a[2]}-${a[1]}`:""})(),onChange:a=>{let b=a.target.value,c=/^(\d{4})-(\d{2})-(\d{2})$/.exec(b);g(c?`${c[3]}-${c[2]}-${c[1]}`:"")},min:(()=>{let a=new Date,b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}-${c}-${d}`})(),"aria-label":"Date"}),n.date&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:n.date})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Start Time"}),(0,b.jsx)("input",{type:"text",placeholder:"HH:MM",className:"border rounded p-2 w-full",value:h,onChange:a=>i(function(a){let b=a.replace(/\D+/g,"").slice(0,4),c=b.slice(0,2),d=b.slice(2,4),e=c;return d&&(e+=":"+d),e}(a.target.value)),onBlur:a=>i(function(a){let b=/^(\d{1,2}):(\d{1,2})$/.exec(a);if(!b)return a;let c=d(Number(b[1]),0,23),e=d(Number(b[2]),0,59);return`${String(c).padStart(2,"0")}:${String(e).padStart(2,"0")}`}(a.target.value)),inputMode:"numeric","aria-label":"Start time HH:MM (24-hour)"}),n.startTime&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:n.startTime})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Duration (min)"}),(0,b.jsx)("input",{type:"number",className:"border rounded p-2 w-full",value:j,onChange:a=>k(parseInt(a.target.value||"60",10))}),n.durationMinutes&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:n.durationMinutes})]})]}),n.form&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:n.form}),(0,b.jsx)("button",{onClick:s,disabled:p||Object.keys(r).length>0,className:"bg-green-600 disabled:opacity-50 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Create"}),l&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("p",{className:"text-sm",children:["Event Code: ",(0,b.jsx)("b",{children:l})]}),(0,b.jsxs)("p",{className:"text-sm break-all",children:["Link: ",(0,b.jsx)("a",{href:t,className:"text-blue-600 underline",children:t})]}),(0,b.jsx)("div",{className:"border inline-block p-2 rounded",children:(0,b.jsx)("img",{src:`/api/qrcode?text=${encodeURIComponent(t)}`,alt:"QR",width:256,height:256})})]})]})}}];

//# sourceMappingURL=src_app_page_tsx_a7111f3e._.js.map